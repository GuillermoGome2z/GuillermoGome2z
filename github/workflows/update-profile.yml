name: ðŸ¤– Update Profile README

on:
  schedule:
    - cron: '0 */6 * * *'  # Cada 6 horas
  workflow_dispatch:  # Permite ejecuciÃ³n manual desde la UI
  push:
    branches:
      - main

permissions:
  contents: write

jobs:
  update-readme:
    name: Update timestamp and stats
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
        
      - name: â° Update timestamp
        run: |
          TIMESTAMP=$(date -u '+%Y-%m-%d %H:%M:%S')
          echo "Current time: $TIMESTAMP UTC"
          sed -i "s/ðŸ• \*\*Ãšltima actualizaciÃ³n:\*\* .*/ðŸ• **Ãšltima actualizaciÃ³n:** $TIMESTAMP UTC  /g" README.md
          
      - name: ðŸ“Š Update stats comment
        run: |
          echo "Stats updated at $(date -u '+%Y-%m-%d %H:%M:%S')"
          
      - name: âœ… Check if there are changes
        id: verify_diff
        run: |
          git diff --quiet . || echo "changed=true" >> $GITHUB_OUTPUT
          
      - name: ðŸ’¾ Commit changes
        if: steps.verify_diff.outputs.changed == 'true'
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add README.md
          git commit -m "ðŸ¤– Auto-update: README timestamp [skip ci]" -m "Updated by GitHub Actions workflow"
          git push
          
      - name: ðŸŽ‰ Success notification
        if: steps.verify_diff.outputs.changed == 'true'
        run: |
          echo "âœ… Profile successfully updated!"
          echo "ðŸ“… Timestamp: $(date -u '+%Y-%m-%d %H:%M:%S') UTC"
